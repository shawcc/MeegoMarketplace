<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>应用中心 - 多布局演示版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        .hide-scroll::-webkit-scrollbar { display: none; }
        body { background-color: #f8fafc; } 
        .card-hover { transition: all 0.2s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        
        /* Store Layout Specifics */
        .store-gradient { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
        .glass-panel { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
    </style>
</head>
<body class="text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        // 显式引用全局变量，解决 ReferenceError
        const React = window.React;
        const ReactDOM = window.ReactDOM;
        const { useState, useEffect } = React;

        // --- 数据定义 ---
        const CATEGORIES = [
            { id: 'all', label: '全部业务' },
            { id: 'dev', label: '产研开发', icon: 'fa-code' },
            { id: 'marketing', label: '市场运营', icon: 'fa-bullhorn' },
            { id: 'hr', label: '行政人事', icon: 'fa-users' },
            { id: 'sales', label: '销售客服', icon: 'fa-headset' }
        ];

        const TYPES = [
            { id: 'all', label: '所有类型' },
            { id: 'solution', label: '解决方案', icon: 'fa-layer-group' },
            { id: 'template', label: '模板', icon: 'fa-table' },
            { id: 'plugin', label: '插件', icon: 'fa-plug' }
        ];

        const CAMPAIGNS = [
            {
                id: 1,
                title: '⚡️ 2025 开工效能加速包',
                desc: '精选 5 款插件与 3 套模板，帮助团队快速从假期模式切换回战斗状态。',
                btnText: '查看专题',
                bgClass: 'bg-gradient-to-r from-blue-600 to-indigo-600',
                icon: 'fa-bolt'
            }
        ];

        const ALL_RESOURCES = [
            { id: 1, title: '敏捷研发全流程套件', category: 'dev', type: 'solution', desc: '需求管理+燃尽图+Gitlab集成', price: '¥299/月', users: 1240, color: 'bg-blue-600', tag: '官方推荐' },
            { id: 2, title: 'OKR 目标管理系统', category: 'hr', type: 'solution', desc: '对齐插件+周报生成+会议模板', price: '免费试用', users: 850, color: 'bg-emerald-600', tag: '热门' },
            { id: 101, title: 'Figma 设计稿实时预览', category: 'dev', type: 'plugin', icon: 'fa-figma', installs: '2k+', author: 'Figma Inc' },
            { id: 102, title: '工时自动统计报表', category: 'hr', type: 'plugin', icon: 'fa-clock', installs: '5k+', author: 'TimeMaster' },
            { id: 103, title: 'CRM 客户漏斗视图', category: 'sales', type: 'plugin', icon: 'fa-filter', installs: '1.2k', author: 'SalesPro' },
            { id: 104, title: '飞书/钉钉消息通知', category: 'dev', type: 'plugin', icon: 'fa-bell', installs: '8k+', author: 'NotificationBot' },
            { id: 201, title: '2025 年度营销活动规划表', category: 'marketing', type: 'template', author: '市场部老张' },
            { id: 202, title: 'Scrum 迭代冲刺看板', category: 'dev', type: 'template', author: '官方实验室' },
            { id: 203, title: '新员工入职培训流程', category: 'hr', type: 'template', author: 'HRBP联盟' },
            { id: 204, title: '大客户跟进记录表', category: 'sales', type: 'template', author: '销售冠军' },
            { id: 205, title: '产品路线图 (Roadmap)', category: 'dev', type: 'template', author: '官方实验室' },
            { id: 206, title: '内容矩阵发布计划', category: 'marketing', type: 'template', author: '运营小助手' },
            { id: 207, title: '季度OKR复盘会议纪要', category: 'hr', type: 'template', author: 'HRBP联盟' },
            { id: 208, title: 'Bug 追踪与分级模板', category: 'dev', type: 'template', author: '测试团队' },
        ];

        // --- 组件 ---

        // 1. 公用卡片组件
        const ResourceCard = ({ item, layout }) => {
            const isStore = layout === 'store';
            
            // Store layout has bigger, darker cards
            const cardClass = isStore 
                ? "bg-slate-800 border-slate-700 text-white hover:border-blue-500" 
                : "bg-white border-slate-200 text-slate-800 hover:border-blue-300";
            
            const badgeClass = isStore
                ? "bg-slate-700 text-slate-300 border-slate-600"
                : "bg-slate-50 text-slate-500 border-slate-100";

            return (
                <div className={`card-hover rounded-xl border p-4 cursor-pointer flex flex-col h-full ${cardClass}`}>
                    <div className="flex justify-between items-start mb-3">
                        <div className={`w-10 h-10 rounded-lg flex items-center justify-center text-white text-lg shadow-sm ${
                            item.type === 'plugin' ? 'bg-indigo-500' : 
                            item.type === 'solution' ? 'bg-blue-600' : 'bg-orange-400'
                        }`}>
                            <i className={`fas ${
                                item.type === 'plugin' ? item.icon : 
                                item.type === 'solution' ? 'fa-layer-group' : 'fa-table'
                            }`}></i>
                        </div>
                        <span className={`text-[10px] font-mono px-2 py-0.5 rounded border uppercase tracking-wider ${badgeClass}`}>
                            {item.type}
                        </span>
                    </div>
                    
                    <h3 className={`font-bold text-sm mb-1 leading-snug line-clamp-2 ${isStore ? 'text-white' : 'text-slate-800'}`}>
                        {item.title}
                    </h3>
                    
                    <div className={`mt-auto pt-3 flex items-center justify-between border-t ${isStore ? 'border-slate-700' : 'border-slate-50'}`}>
                        <span className={`text-xs truncate max-w-[100px] ${isStore ? 'text-slate-400' : 'text-slate-400'}`}>
                            {item.type === 'plugin' ? `${item.installs} 安装` : item.author || '官方'}
                        </span>
                        {item.type === 'solution' ? (
                            <button className="text-xs font-bold text-blue-500 hover:text-blue-400">详情</button>
                        ) : (
                            <button className={`w-7 h-7 rounded-full flex items-center justify-center transition-colors ${isStore ? 'bg-slate-700 hover:bg-blue-600 text-white' : 'bg-slate-50 hover:bg-blue-50 hover:text-blue-600 text-slate-400'}`}>
                                <i className="fas fa-plus text-[10px]"></i>
                            </button>
                        )}
                    </div>
                </div>
            );
        };

        const MainApp = () => {
            const [layout, setLayout] = useState('standard'); // standard | sidebar | store
            const [activeCategory, setActiveCategory] = useState('all');
            const [activeType, setActiveType] = useState('all');
            const [filteredResources, setFilteredResources] = useState(ALL_RESOURCES);

            useEffect(() => {
                let results = ALL_RESOURCES;
                if (activeCategory !== 'all') results = results.filter(item => item.category === activeCategory);
                if (activeType !== 'all') results = results.filter(item => item.type === activeType);
                setFilteredResources(results);
            }, [activeCategory, activeType]);

            // Layout Switcher UI
            const LayoutSwitcher = () => (
                <div className="fixed top-4 right-4 z-50 bg-white shadow-lg rounded-full p-1 border border-slate-200 flex text-xs font-medium">
                    <button onClick={() => setLayout('standard')} className={`px-3 py-1.5 rounded-full transition-all ${layout === 'standard' ? 'bg-slate-800 text-white shadow' : 'text-slate-500 hover:text-slate-800'}`}>
                        <i className="fas fa-columns mr-1"></i> 标准内嵌
                    </button>
                    <button onClick={() => setLayout('sidebar')} className={`px-3 py-1.5 rounded-full transition-all ${layout === 'sidebar' ? 'bg-slate-800 text-white shadow' : 'text-slate-500 hover:text-slate-800'}`}>
                        <i className="fas fa-table-columns mr-1"></i> 侧栏导航
                    </button>
                    <button onClick={() => setLayout('store')} className={`px-3 py-1.5 rounded-full transition-all ${layout === 'store' ? 'bg-slate-800 text-white shadow' : 'text-slate-500 hover:text-slate-800'}`}>
                        <i className="fas fa-store mr-1"></i> 沉浸商店
                    </button>
                </div>
            );

            // --- Layout A: Standard (内嵌 Tab 版) ---
            const renderStandard = () => (
                <div className="p-8 max-w-6xl mx-auto min-h-screen bg-slate-50">
                    <div className="flex items-end justify-between mb-6">
                        <div>
                            <h1 className="text-2xl font-bold text-slate-900">应用中心</h1>
                            <p className="text-slate-500 text-sm mt-1">发现模版与插件，扩展工作流能力。</p>
                        </div>
                    </div>
                    {/* Tabs */}
                    <div className="border-b border-slate-200 mb-6 overflow-x-auto">
                        <div className="flex space-x-6">
                            {CATEGORIES.map(cat => (
                                <button key={cat.id} onClick={() => setActiveCategory(cat.id)} className={`pb-3 text-sm font-medium border-b-2 px-1 ${activeCategory === cat.id ? 'border-blue-600 text-blue-600' : 'border-transparent text-slate-500 hover:text-slate-700'}`}>
                                    {cat.icon && <i className={`fas ${cat.icon} mr-2 opacity-80`}></i>}{cat.label}
                                </button>
                            ))}
                        </div>
                    </div>
                    {/* Filters */}
                    <div className="flex gap-2 mb-6">
                        {TYPES.map(type => (
                            <button key={type.id} onClick={() => setActiveType(type.id)} className={`px-3 py-1 rounded-full text-xs font-medium border ${activeType === type.id ? 'bg-slate-800 text-white border-slate-800' : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50'}`}>
                                {type.label}
                            </button>
                        ))}
                    </div>
                    {/* Content */}
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        {filteredResources.map(item => <ResourceCard key={item.id} item={item} layout="standard" />)}
                    </div>
                </div>
            );

            // --- Layout B: Sidebar (侧栏导航版) ---
            const renderSidebar = () => (
                <div className="flex h-screen bg-white overflow-hidden">
                    {/* Sidebar */}
                    <div className="w-64 bg-slate-50 border-r border-slate-200 flex flex-col">
                        <div className="p-6">
                            <h1 className="text-lg font-bold text-slate-800"><i className="fas fa-shapes mr-2 text-blue-600"></i>应用中心</h1>
                        </div>
                        <nav className="flex-1 px-3 space-y-1 overflow-y-auto">
                            <div className="px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider">业务领域</div>
                            {CATEGORIES.map(cat => (
                                <button key={cat.id} onClick={() => setActiveCategory(cat.id)} className={`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${activeCategory === cat.id ? 'bg-blue-50 text-blue-700' : 'text-slate-600 hover:bg-slate-100'}`}>
                                    <i className={`fas ${cat.icon || 'fa-th-large'} w-6 text-center mr-2 ${activeCategory === cat.id ? 'text-blue-600' : 'text-slate-400'}`}></i>
                                    {cat.label}
                                </button>
                            ))}
                            <div className="mt-8 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider">资源类型</div>
                            {TYPES.filter(t => t.id !== 'all').map(type => (
                                <button key={type.id} onClick={() => setActiveType(activeType === type.id ? 'all' : type.id)} className={`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${activeType === type.id ? 'bg-slate-200 text-slate-800' : 'text-slate-600 hover:bg-slate-100'}`}>
                                    <i className={`fas ${type.icon} w-6 text-center mr-2 text-slate-400`}></i>
                                    {type.label}
                                </button>
                            ))}
                        </nav>
                        <div className="p-4 border-t border-slate-200">
                            <div className="bg-blue-50 rounded p-3 text-xs text-blue-800">
                                <p className="font-bold mb-1">开发者招募</p>
                                <p className="mb-2 text-blue-600">开发插件可获首年 0 抽成优惠。</p>
                                <button className="text-blue-700 font-bold underline">了解详情</button>
                            </div>
                        </div>
                    </div>
                    {/* Main Content */}
                    <div className="flex-1 overflow-y-auto bg-white p-8">
                        <div className="max-w-5xl">
                            <h2 className="text-xl font-bold text-slate-800 mb-6 flex items-center">
                                {CATEGORIES.find(c => c.id === activeCategory).label}
                                <span className="ml-2 text-sm font-normal text-slate-400">({filteredResources.length})</span>
                            </h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                {filteredResources.map(item => <ResourceCard key={item.id} item={item} layout="sidebar" />)}
                            </div>
                        </div>
                    </div>
                </div>
            );

            // --- Layout C: Storefront (沉浸商店版) ---
            const renderStore = () => (
                <div className="min-h-screen bg-slate-900 text-slate-100 overflow-y-auto">
                    {/* Dark Header */}
                    <div className="store-gradient text-white pb-12 pt-12 px-8">
                        <div className="max-w-6xl mx-auto flex items-center justify-between">
                            <div>
                                <h1 className="text-3xl font-extrabold mb-2 tracking-tight">Marketplace</h1>
                                <p className="text-blue-200">探索无限可能，打造您的专属工作台</p>
                            </div>
                            <div className="bg-white/10 backdrop-blur rounded-full px-4 py-2 flex items-center border border-white/20">
                                <i className="fas fa-search text-white/50 mr-3"></i>
                                <input type="text" placeholder="搜索应用..." className="bg-transparent border-none outline-none text-white placeholder-white/50 text-sm w-48" />
                            </div>
                        </div>
                        {/* Categories as Pills */}
                        <div className="max-w-6xl mx-auto mt-8 flex gap-3">
                            {CATEGORIES.map(cat => (
                                <button key={cat.id} onClick={() => setActiveCategory(cat.id)} className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${activeCategory === cat.id ? 'bg-blue-500 text-white shadow-lg shadow-blue-500/30' : 'bg-white/5 text-slate-300 hover:bg-white/10'}`}>
                                    {cat.label}
                                </button>
                            ))}
                        </div>
                    </div>

                    <div className="max-w-6xl mx-auto px-8 -mt-6">
                        {/* Banner overlapping header */}
                         {activeCategory === 'all' && (
                            <div className="bg-gradient-to-r from-indigo-500 to-purple-600 rounded-2xl p-8 mb-10 shadow-2xl flex items-center justify-between relative overflow-hidden group">
                                <div className="relative z-10">
                                    <span className="bg-white/20 text-white text-[10px] font-bold px-2 py-1 rounded uppercase tracking-wider mb-2 inline-block">Featured</span>
                                    <h2 className="text-2xl font-bold text-white mb-2">2025 开工效能包</h2>
                                    <p className="text-indigo-100 mb-6 max-w-lg">一键配置产研团队所需的全部报表与自动化插件，效率提升 300%。</p>
                                    <button className="bg-white text-indigo-600 px-6 py-2 rounded-lg font-bold shadow hover:bg-indigo-50 transition-colors">立即获取</button>
                                </div>
                                <i className="fas fa-rocket text-[150px] absolute -right-6 -bottom-10 text-white opacity-20 rotate-12 group-hover:rotate-6 transition-transform"></i>
                            </div>
                        )}

                        <div className="flex items-center justify-between mb-6">
                            <h2 className="text-xl font-bold text-white">
                                {activeCategory === 'all' ? '热门推荐' : CATEGORIES.find(c => c.id === activeCategory).label}
                            </h2>
                            <div className="flex gap-2">
                                {TYPES.filter(t => t.id !== 'all').map(type => (
                                    <button key={type.id} onClick={() => setActiveType(activeType === type.id ? 'all' : type.id)} className={`px-3 py-1 rounded text-xs border ${activeType === type.id ? 'bg-blue-600 border-blue-600 text-white' : 'border-slate-700 text-slate-400 hover:text-white hover:border-slate-500'}`}>
                                        {type.label}
                                    </button>
                                ))}
                            </div>
                        </div>

                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 pb-20">
                            {filteredResources.map(item => <ResourceCard key={item.id} item={item} layout="store" />)}
                        </div>
                    </div>
                </div>
            );

            return (
                <div className="relative">
                    <LayoutSwitcher />
                    {layout === 'standard' && renderStandard()}
                    {layout === 'sidebar' && renderSidebar()}
                    {layout === 'store' && renderStore()}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MainApp />);
    </script>
</body>
</html>